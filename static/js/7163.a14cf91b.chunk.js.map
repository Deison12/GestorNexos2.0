{"version":3,"file":"static/js/7163.a14cf91b.chunk.js","mappings":"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","sources":["components/Nexos/pages/Pasos/ItemsSelected/ItemsSelected.tsx","helpers/FormatCurrency.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { TitleComponent, BreadCrumb, BasicDataTable } from \"../../../Global\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { useFetch } from \"../../../hooks/useFetch\";\nimport { Button } from \"react-bootstrap\";\nimport { useTokenQuoteCheck } from \"../../../hooks\";\nimport { formatNumber } from \"../../../../../helpers\";\n\nconst Paso4 = () => {\n  const storageQuoteId = localStorage.getItem(\"form1-ID\");\n  //geting data\n  const [data, setData] = useState<any>({\n    quoteId: storageQuoteId,\n    items: []\n  });\n  const location: any = useLocation();\n  const navigate: any = useNavigate();\n  const { handlerRedirect } = useTokenQuoteCheck();\n  const { postData } = useFetch();\n  const create_quote_id = localStorage.getItem('create_quote_id');\n  const client_id = localStorage.getItem('form_client_id');\n\n  /* Columns for the Data Table */\n  const columns: any[] = [\n    {\n      Header: \"N°\",\n      accessor: \"\",\n      className: \"wd-5p borderrigth\",\n      Cell: ({ row }: { row: any }) => {\n        const { index } = row;\n        const consecutiveNumber = index + 1;\n        return <span>{consecutiveNumber}</span>;\n      },\n    },\n    {\n      Header: \"Nombre\",\n      accessor: \"name\",\n      className: \"wd-25p borderrigth\",\n      Cell: ({ value }: { value: string }) => (\n        <span>{value.toUpperCase()}</span>\n      ),\n    },\n    {\n      Header: \"Cantidad\",\n      accessor: \"value\",\n      className: \"wd-20p borderrigth\",\n    },\n    {\n      Header: \"Precio\",\n      accessor: \"price\",\n      className: \"wd-20p borderrigth\",\n      Cell: ({ value }: { value: string }) => (\n        <span>\n          { `$ ${formatNumber(value, 2)}` }\n        </span>\n      ),\n    },\n    {\n      Header: \"Quitar\",\n      accessor: \"\",\n      className: \"wd-15p borderrigth\",\n      // Custom cell rendering for the \"Accion\" column with a link to edit the profile\n      Cell: ({ row }: { row: any }) => {\n        const handleDelete = (id: number) => {\n          const filteredData = data?.items.filter(\n            (item: any) => item.item_id !== id\n          );\n          setData((prev: any) => ({\n            ...prev,\n            items: [...filteredData]\n          }));\n        };\n        return (\n          <div\n            className=\"d-flex align-items-center gap-1\"\n            onClick={() => handleDelete(row?.original?.item_id)}\n          >\n            <span className=\"material-icons md-5 md-dark cursor-pointer\">&#xe872;</span>\n            Quitar\n          </div>\n        );\n      },\n    },\n  ];\n\n  const handlerRedirects = () => {\n    if (!location.state.items || location.state.items.length === 0) {\n      navigate(`${process.env.PUBLIC_URL}/nexos/seleccionarserviciosacotizar`);\n    }\n    handlerRedirect(storageQuoteId);\n  }\n\n  useEffect(() => {\n    handlerRedirects();\n    const getData = async () => {\n      const response = location?.state?.items;\n      setData((prev: any) => ({\n        ...prev,\n        items: [...response]\n      }));\n    };\n    getData();\n  }, [location, storageQuoteId]);\n\n  const handleSubmit = async () => {\n    const form_quote_id = localStorage.getItem(\"form_quote_id\");\n\n    const newArray = data?.items.map((item: any) => ({\n      item_id: Number(item.item_id),\n      value: Number(item.value),\n      discount: 0,\n      is_discount_percentage: 0\n    }));\n\n    const body = {\n      quote_id: create_quote_id ? create_quote_id : form_quote_id,\n      client_id: client_id,\n      items: newArray\n    };\n\n    try {\n      await postData(body, \"quotes/items/save\");\n      navigate(`${process.env.PUBLIC_URL}/nexos/cotizacionpdf`);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  return (\n    <div>\n      {/* Breadcrumb */}\n      <BreadCrumb\n        items={['INICIO', 'VENTAS', 'LISTA COTIZACIONES', \"vista previa\"]}\n        baseURL={['inicio', 'nexos/ventasconfirmaciones', 'COTIZACIONES', \"nexos/listarusuarios\"]}\n\n      />\n      {/* Component Title */}\n      <TitleComponent\n        title={\"PASO 4\"}\n        subtitle=\"ITEMS SELECCIONADOS\"\n        align=\"center\"\n      />\n      {/* Data Grid Table */}\n      <BasicDataTable\n        columns={columns}\n        data={data?.items}\n        addButtonLink={`${process.env.PUBLIC_URL}/nexos/seleccionarserviciosacotizar`}\n        btnText=\"MODIFICAR ITEMS\"\n        addButtonState={data}\n      />\n\n      <div className=\"w-100 d-flex justify-content-end mb-5\">\n        <Button onClick={handleSubmit} style={{}} className=\"btn btn-primary d-none d-md-block\">\n          GUARDAR ITEMS\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default Paso4;\n","export const formatNumber = (value: number | string, decimals: number = 2): string => {\n    // Convierte el valor a número si es un string válido que representa un número\n    const numericValue: number = typeof value === 'string' ? parseFloat(value) : Number(value);\n\n    if (isNaN(numericValue)) {\n        throw new Error('El valor proporcionado no es un número válido.');\n    }\n\n    // Decide si se debe formatear como decimal o entero\n    const formattedValue = Number.isInteger(numericValue)\n        ? numericValue.toLocaleString()\n        : numericValue.toFixed(decimals).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n\n    return formattedValue;\n};\n"],"names":["storageQuoteId","localStorage","getItem","useState","quoteId","items","data","setData","location","useLocation","navigate","useNavigate","handlerRedirect","useTokenQuoteCheck","postData","useFetch","create_quote_id","client_id","columns","Header","accessor","className","Cell","consecutiveNumber","row","index","value","toUpperCase","formatNumber","onClick","id","filteredData","filter","item","item_id","prev","handleDelete","original","useEffect","state","length","process","getData","response","handleSubmit","form_quote_id","newArray","map","Number","discount","is_discount_percentage","body","quote_id","console","log","baseURL","title","subtitle","align","addButtonLink","btnText","addButtonState","style","decimals","numericValue","parseFloat","isNaN","Error","formattedValue","isInteger","toLocaleString","toFixed","replace"],"sourceRoot":""}