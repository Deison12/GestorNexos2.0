"use strict";(self.webpackChunknowa=self.webpackChunknowa||[]).push([[9966],{32743:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(4942),i=n(45987),l=n(74165),o=n(15861),s=n(1413),r=n(29439),c=n(72791),d=n(79627),u=n(43360),m=n(89743),p=n(2677),h=n(20160),v=n(323),g=n(87607),f=n(36571),x=n(7792),Z=n(44393),j=n(97892),y=n.n(j),b=n(42713),_=n(24490),N=n(16871),S=n(12009),w=n(82570),C=n.n(w),E=n(43504),D=n(95316),I=n(13811),L=n(20409),F=n(78983),R=n(45644),k=n(43510),z=n(80184),T=["city_name","description","status_id","email","email2","email3","phone","phone2","phone3"],A=["status","status_id","meeting_date"],M={id:0,city_id:null,description:"",email:"",name:"",nit:"",phone:"",status_id:0,address:"",email2:null,email3:null,phone2:null,phone3:null,units_total:"0",units_budget:"0"},B={name:"",email:"",contact_phone:"",phone:"",nit:"",city_id:"",address:"",contact_person:"",units_total:"",units_budget:""},O=function(e){var t=e.form_nit,n=(e.state,e.storageQuoteId),u=e.serviceType,g=e.handleClose,f=(0,c.useState)(y()(" ")),x=(0,r.Z)(f,2),Z=(x[0],x[1]),j=(0,_.fg)().handlerRedirect,S=(0,R.i)(),w=S.getAllData,E=(S.postData,S.getAllDataStringify,S.error,(0,c.useState)("")),D=(0,r.Z)(E,2),O=D[0],q=D[1],Y=(0,c.useState)(!1),P=(0,r.Z)(Y,2),H=P[0],U=P[1],V=(0,c.useState)(!1),$=(0,r.Z)(V,2),G=$[0],K=$[1],J=(0,c.useState)(!1),Q=(0,r.Z)(J,2),W=Q[0],X=Q[1],ee=(0,c.useState)(B),te=(0,r.Z)(ee,2),ne=te[0],ae=te[1],ie=(0,c.useState)(!0),le=(0,r.Z)(ie,2),oe=(le[0],le[1]),se=(0,c.useState)([]),re=(0,r.Z)(se,2),ce=re[0],de=re[1],ue=(0,c.useState)([]),me=(0,r.Z)(ue,2),pe=(me[0],me[1]),he=(0,c.useState)(!1),ve=(0,r.Z)(he,2),ge=(ve[0],ve[1]),fe=(0,c.useState)(!0),xe=(0,r.Z)(fe,2),Ze=(xe[0],xe[1]),je=((0,N.s0)(),(0,N.TH)()),ye=(0,c.useState)(!0),be=(0,r.Z)(ye,2),_e=be[0],Ne=be[1],Se=(0,c.useState)(M),we=(0,r.Z)(Se,2),Ce=we[0],Ee=we[1],De=Ce.nit,Ie=Ce.name,Le=Ce.address,Fe=(Ce.contact_phone,Ce.phone),Re=Ce.phone2,ke=Ce.phone3,ze=Ce.email,Te=Ce.email2,Ae=Ce.email3,Me=Ce.units_total,Be=Ce.units_budget,Oe=(0,c.useState)(0),qe=(0,r.Z)(Oe,2),Ye=qe[0],Pe=qe[1],He=(0,_.Jf)(ne,Ee,ae,oe),Ue=He.handleAddInput,Ve=He.handleRemoveInput,$e=He.handleChangeInput,Ge=He.changeIsDisabled,Ke=(He.handleResetInputs,He.mapInputArray,He.setInputs),Je=He.inputs,Qe=(0,_.Jf)(ne,Ee,ae,oe),We=Qe.handleAddInput,Xe=Qe.handleRemoveInput,et=Qe.handleChangeInput,tt=Qe.changeIsDisabled,nt=(Qe.handleResetInputs,Qe.mapInputArray,Qe.setInputs),at=Qe.inputs,it=function(e){var t=e.handleAddInputType,n=e.isDisabled;return(0,z.jsx)(I.Z,{style:{fontSize:"24px"},className:"text-primary ms-2 ".concat(n?"disabled text-muted":""),onMouseDown:n?null:t,children:(0,z.jsx)(L.Z,{children:"add_circle"})})},lt=function(e){var t=e.name,n=(e.index,e.handleSubsInputType);return(0,z.jsx)(I.Z,{style:{fontSize:"24px"},className:"text-primary ms-2",onMouseDown:function(){n(t)},children:(0,z.jsx)(L.Z,{children:"remove_circle"})})},ot=function(e,t,n){e.target.value=e.target.value.replace(/[^\d]/g,""),e.target.value=e.target.value.slice(0,10),e.target.length>10||""===e.target.value||C().isEmpty(e.target.value)||0===e.target.length?(t[e.target.name]="N\xfamero telefonico no v\xe1lido",et(n,e.target.value),tt(n,!0)):(tt(n,!1),delete t[e.target.name]),et(n,e.target.value),Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e.target.name,e.target.value))}))},st=function(e,t,n){!(0,k.vV)(e.target.value)||C().isEmpty(e.target.value)||""===e.target.value?(Ge(n,!0),t[e.target.name]="Correo Invalido o vacio"):(Ge(n,!1),delete t[e.target.name]),$e(n,e.target.value),Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e.target.name,e.target.value))}))},rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s.Z)({},ne);if("name"===e.target.name&&G&&(C().isEmpty(e.target.value)?n.name="El nombre de la entidad es obligatoria":delete n.name,Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e.target.name,e.target.value))}))),"address"===e.target.name&&G&&(C().isEmpty(e.target.value)?n.address="La direcci\xf3n de la entidad es obligatoria":delete n.address,Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e.target.name,e.target.value))}))),"contact_person"===e.target.name&&G&&(C().isEmpty(e.target.value)?n.contact_person="La persona dirigida de la entidad es obligatoria":delete n.contact_person,Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e.target.name,e.target.value))}))),"units_total"===e.target.name&&G&&(e.target.value=e.target.value.replace(/^0+|[^0-9]/g,""),C().isEmpty(e.target.value)?n.units_total="La cantidad total de \xfanidades es obligatoria":(delete n.units_budget,delete n.units_total),"change"===e.type?Ee((function(t){var n;return(0,s.Z)((0,s.Z)({},t),{},(n={},(0,a.Z)(n,e.target.name,e.target.value),(0,a.Z)(n,"units_budget",e.target.value),n))})):Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e.target.name,e.target.value))}))),"units_budget"===e.target.name&&G&&(e.target.value=e.target.value.replace(/^0+|[^0-9]/g,""),C().isEmpty(e.target.value)?n.units_budget="La cantidad de \xfanidades cotizadas es obligatoria":Number(e.target.value)>Number(Me)?n.units_budget="La cantidad de \xfanidades cotizadas no puede ser mayor a la cantidad de \xfanidades totales":(delete n.units_budget,delete n.units_total),Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e.target.name,e.target.value))}))),"nit"===e.target.name&&G&&(C().isEmpty(e.target.value)?n.nit="El nit de la entidad es obligatoria":(0,k.o8)(e.target.value)?delete n.nit:n.nit='El nit debe tener un form\xe1to v\xe1lido ("123456-2")',Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e.target.name,e.target.value))}))),"city_id"===e.target.name&&G&&(C().isEmpty(e.target.value)||0===Number(e.target.value)?n.city_id="Elija una ciudad":delete n.city_id,Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e.target.name,e.target.value))}))),"email"!==e.target.name&&"email2"!==e.target.name&&"email3"!==e.target.name||!G||st(e,n,t),"phone"!==e.target.name&&"phone2"!==e.target.name&&"phone3"!==e.target.name||!G||ot(e,n,t),"contact_phone"===e.target.name&&G){var i=e.target.value,l=/^\d+$/.test(i);C().isEmpty(i)?n.contact_phone="El telefono encargado es obligatorio":l?delete n.contact_phone:n.contact_phone="El telefono debe contener solo n\xfameros",Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e.target.name,i))}))}"status_id"===e.target.name&&Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e.target.name,Number(e.target.value)))})),Object.keys(n).length>0?(ae(n),oe(!0)):(ae({}),oe(!1))},ct=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var n,a,o,r,c,d,u,m,p,h,v,g,f,x,Z;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!0),t.preventDefault(),!1!==t.currentTarget.checkValidity()){e.next=8;break}t.preventDefault(),t.stopPropagation(),e.next=13;break;case 8:return f={email:null!==(n=null===(a=Je[0])||void 0===a?void 0:a.value)&&void 0!==n?n:"",email2:null!==(o=null===(r=Je[1])||void 0===r?void 0:r.value)&&void 0!==o?o:"",email3:null!==(c=null===(d=Je[2])||void 0===d?void 0:d.value)&&void 0!==c?c:""},x={phone:null!==(u=null===(m=at[0])||void 0===m?void 0:m.value)&&void 0!==u?u:"",phone2:null!==(p=null===(h=at[1])||void 0===h?void 0:h.value)&&void 0!==p?p:"",phone3:null!==(v=null===(g=at[2])||void 0===g?void 0:g.value)&&void 0!==v?v:""},Ce.city_name,Ce.description,Ce.status_id,Ce.email,Ce.email2,Ce.email3,Ce.phone,Ce.phone2,Ce.phone3,Z=(0,i.Z)(Ce,T),(0,s.Z)((0,s.Z)((0,s.Z)({},Z),{},{id:0},f),x),e.abrupt("return");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dt=function(e){var t=Object.assign({},e);(null===ce||void 0===ce?void 0:ce.some((function(t){return t.id===e.city_id})))&&Pe(e.city_id),Ee((0,s.Z)({},t)),mt(e),ut(e),ge(!1)},ut=function(e){K(!1),oe(!0);var t={name:e.name?null:"El campo est\xe1 vac\xedo",email:e.email?null:"El campo est\xe1 vac\xedo",phone:e.phone?null:"El campo est\xe1 vac\xedo",nit:e.nit?null:"El campo est\xe1 vac\xedo",city_id:e.city_id?null:"El campo est\xe1 vac\xedo",address:e.address?null:"El campo est\xe1 vac\xedo"};Object.keys(t).forEach((function(e){null==t[e]&&delete t[e]})),0===Object.keys(t).length&&(K(!1),oe(!1)),ae(t)},mt=function(e){console.log({item:e});var t=[],n=[],a=[],i=[];""!=e.email&&null!=e.email&&0!=e.email&&t.push(e.email1),""!=e.email2&&null!=e.email2&&0!=e.email2&&t.push(e.email2),""!=e.email3&&null!=e.email3&&0!=e.email3&&t.push(e.email3),""!=e.phone&&null!=e.phone&&0!=e.phone&&a.push(e.phone),""!=e.phone2&&null!=e.phone2&&0!=e.phone2&&a.push(e.phone2),""!=e.phone3&&null!=e.phone3&&0!=e.phone3&&a.push(e.phone3),1===t.length&&n.push({value:e.email,showRemove:!1,isDisabled:!1}),2===t.length&&n.push({value:e.email,showRemove:!0,isDisabled:!1},{value:e.email2,showRemove:!1,isDisabled:!1}),3===t.length&&n.push({value:e.email,showRemove:!0,isDisabled:!1},{value:e.email2,showRemove:!0,isDisabled:!1},{value:e.email3,showRemove:!0,isDisabled:!1}),1===a.length&&i.push({value:e.phone,showRemove:!1,isDisabled:!1}),2===a.length&&i.push({value:e.phone,showRemove:!0,isDisabled:!1},{value:e.phone2,showRemove:!1,isDisabled:!1}),3===a.length&&i.push({value:e.phone,showRemove:!0,isDisabled:!1},{value:e.phone2,showRemove:!0,isDisabled:!1},{value:e.phone3,showRemove:!0,isDisabled:!1}),Ke(n),nt(i)},pt=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var n,a,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={nit:O},e.prev=1,ge(!0),Ze(!0),e.next=6,w("api/residential/list",n);case 6:1===(a=e.sent).length&&t&&(null===t||void 0===t?void 0:t.length)>5&&_e&&!W?dt(a[0]):(i=a.slice(0,15),pe(i)),Ne(!1),Ze(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("Error");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),ht=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("api/cities/list");case 2:t=e.sent,de(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){ht()}),[]),(0,c.useEffect)((function(){O.length>=5&&ce.length>0?pt():pe([])}),[O,ce]),(0,c.useEffect)((function(){if(null!==je&&void 0!==je&&je.state&&null!==je&&void 0!==je&&je.state.name&&!W){var e=null===je||void 0===je?void 0:je.state,t=(e.status,e.status_id,e.meeting_date),n=(0,i.Z)(e,A);Pe(n.city_id),Z(y()(t)),Ee((0,s.Z)((0,s.Z)({},n),{},{meeting_date:y()(t)})),mt(null===je||void 0===je?void 0:je.state),ut(n),ge(!1),Ze(!1),X(!0)}}),[je]),(0,c.useEffect)((function(){t&&t.length>5&&_e&&q(t)}),[t,_e]),(0,c.useEffect)((function(){"cotizacion"===u&&j(n)}),[n]),(0,z.jsx)("div",{children:(0,z.jsxs)("div",{className:"mt-5 w-100",children:[(0,z.jsx)(b.r3,{subtitle:"FORMULARIO CREAR CLIENTE",align:"center"}),(0,z.jsx)("div",{className:"",children:(0,z.jsx)(p.Z,{lg:12,md:12,children:(0,z.jsx)(d.Z,{children:(0,z.jsx)(d.Z.Body,{children:(0,z.jsxs)(F.lx,{className:"needs-validation",noValidate:!0,validated:H,onSubmit:ct,children:[(0,z.jsxs)(m.Z,{children:[(0,z.jsxs)(p.Z,{xs:12,sm:12,md:6,lg:6,xl:6,children:[(0,z.jsx)(F.L8,{htmlFor:"validationCustom01",children:"Nombre de la entidad*"}),(0,z.jsx)(b.fm,{message:ne.name,inputFocus:G,children:(0,z.jsx)(F.jO,{type:"text",id:"validationCustom01",name:"name",value:Ie||"",onChange:rt,onBlur:rt,onFocus:function(){return K(!0)},required:!0})})]}),(0,z.jsxs)(p.Z,{xs:12,sm:12,md:6,lg:6,xl:6,children:[(0,z.jsx)(F.L8,{htmlFor:"validationCustom03",children:"NIT*"}),(0,z.jsx)(b.fm,{message:ne.nit,inputFocus:G,children:(0,z.jsx)(F.jO,{type:"text",id:"validationCustom03",name:"nit",onChange:rt,onBlur:rt,onFocus:function(){return K(!0)},value:De||"",required:!0})})]})]}),(0,z.jsxs)(m.Z,{children:[(0,z.jsxs)(p.Z,{xs:12,sm:12,md:6,lg:6,xl:6,children:[(0,z.jsx)(F.L8,{htmlFor:"validationCustom03",children:"Direccion*"}),(0,z.jsx)(b.fm,{message:ne.address,inputFocus:G,children:(0,z.jsx)(F.jO,{type:"text",id:"validationCustom03",name:"address",onChange:rt,onBlur:rt,onFocus:function(){return K(!0)},required:!0,value:Le||""})})]}),(0,z.jsxs)(p.Z,{xs:12,sm:12,md:6,lg:6,xl:6,children:[(0,z.jsx)(F.L8,{htmlFor:"validationCustom03",children:"Ciudad*"}),ce.length>0&&(0,z.jsx)(b.fm,{message:ne.city_id,inputFocus:G,children:(0,z.jsxs)(h.Z.Select,{name:"city_id","aria-label":"Default select example",className:"selectproduct w-100",value:Ye,onFocus:function(){return K(!0)},onBlur:function(){return K(!1)},onChange:function(e){Pe(e.target.value),e.target.value=e.target.value.toString(),rt(e),Ee((0,s.Z)((0,s.Z)({},Ce),{},(0,a.Z)({},e.target.name,e.target.value)))},children:[(0,z.jsx)("option",{value:0,children:"Seleccionar ciudad"}),ce.map((function(e){return(0,z.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})]}),(0,z.jsxs)(p.Z,{xs:12,sm:12,md:6,lg:6,xl:6,children:[(0,z.jsx)(F.L8,{htmlFor:"validationCustom03",children:"Unidades*"}),(0,z.jsx)(b.fm,{message:ne.units_total,inputFocus:G,children:(0,z.jsx)(F.jO,{type:"number",id:"validationCustom03",name:"units_total",onChange:rt,onBlur:rt,onFocus:function(){return K(!0)},value:Me,required:!0})})]}),(0,z.jsxs)(p.Z,{xs:12,sm:12,md:6,lg:6,xl:6,children:[(0,z.jsx)(F.L8,{htmlFor:"validationCustom03",children:"Unidades Cotizadas"}),(0,z.jsx)(b.fm,{message:ne.units_budget,inputFocus:G,children:(0,z.jsx)(F.jO,{type:"number",id:"validationCustom03",name:"units_budget",onChange:rt,onBlur:rt,onFocus:function(){return K(!0)},value:Be,required:!0})})]})]}),(0,z.jsxs)(m.Z,{children:[(0,z.jsx)(p.Z,{xs:12,sm:12,md:6,lg:6,xl:6,children:null===Je||void 0===Je?void 0:Je.map((function(e,t){return(0,z.jsx)(c.Fragment,{children:(0,z.jsx)(F.b7,{style:{paddingLeft:0},children:(0,z.jsx)("div",{id:"multiCollapseExample1",children:(0,z.jsxs)(v.Z,{className:"form-group",children:[(0,z.jsx)(F.L8,{htmlFor:"validationCustom03",children:0===t?"Correo*":"Correo-".concat(t+1)}),(0,z.jsxs)("div",{className:"d-flex",children:[(0,z.jsx)(b.fm,{message:0===t?ne.email:ne["email".concat(t+1)],inputFocus:G,children:(0,z.jsx)(h.Z.Control,{name:0===t?"email":"email".concat(t+1),onFocus:function(){return K(!0)},onBlur:function(e){rt(e,t)},onChange:function(e){rt(e,t)},value:(0===t?ze:1===t?Te:Ae)||e.value,type:"email"})}),e.showRemove?(0,z.jsx)(lt,{name:"email",index:t,handleSubsInputType:Ve}):(0,z.jsx)(it,{handleAddInputType:Ue,isDisabled:e.isDisabled})]})]})})})},t)}))}),(0,z.jsx)(p.Z,{xs:12,sm:12,md:6,lg:6,xl:6,children:null===at||void 0===at?void 0:at.map((function(e,t){return(0,z.jsx)(c.Fragment,{children:(0,z.jsx)(F.b7,{style:{paddingLeft:0},children:(0,z.jsx)("div",{id:"multiCollapseExample1",children:(0,z.jsxs)(v.Z,{className:"form-group",children:[(0,z.jsx)(F.L8,{htmlFor:"validationCustom03",children:0===t?"Telefono*":"Telefono-".concat(t+1)}),(0,z.jsxs)("div",{className:"d-flex",children:[(0,z.jsx)(b.fm,{message:0===t?ne.phone:ne["phone".concat(t+1)],inputFocus:G,children:(0,z.jsx)(h.Z.Control,{name:0===t?"phone":"phone".concat(t+1),onFocus:function(){return K(!0)},onBlur:function(e){rt(e,t)},onChange:function(e){rt(e,t)},value:(0===t?Fe:1===t?Re:ke)||e.value,type:"text"})}),e.showRemove?(0,z.jsx)(lt,{name:"phone",index:t,handleSubsInputType:Xe}):(0,z.jsx)(it,{handleAddInputType:We,isDisabled:e.isDisabled})]})]})})})},t)}))})]}),(0,z.jsxs)(F.b7,{className:" d-flex justify-content-end mt-5",children:[(0,z.jsx)(F.b7,{className:" d-flex justify-content-end ",children:(0,z.jsx)(F.u5,{color:"primary",onClick:g,children:"Cerrar"})}),(0,z.jsx)(F.u5,{color:"primary",type:"submit",children:"Continuar"})]})]})})})})})]})})},q=function(e){var t=e.show,n=e.handleClose,a=e.searchNit;return(0,z.jsx)(D.Z,{size:"lg",show:t,onHide:function(){return n},"aria-labelledby":"example-modal-sizes-title-lg",children:(0,z.jsx)(D.Z.Body,{children:(0,z.jsx)(O,{serviceType:"demos",handleClose:n,searchNit:a})})})},Y=["id"],P={id:0,residential_id:null,demo_date:y()().format("L"),contact_name:"",contact_phone:"",contact_email:"",schedule_type:"",description:"",client_type:"",meeting_type:""},H=function(){var e,t,n,j,w,D,I,L,F,R=localStorage.getItem("form_nit"),k=(0,N.TH)().state,T=(0,_.ib)(),A=T.getAllData,M=T.postData,B=T.putData,O=(0,_.pN)(),H=O.errors,U=O.setError,V=O.clearError,$=(0,c.useState)([]),G=(0,r.Z)($,2),K=G[0],J=G[1],Q=(0,c.useState)(""),W=(0,r.Z)(Q,2),X=W[0],ee=W[1],te=(0,c.useState)(!1),ne=(0,r.Z)(te,2),ae=ne[0],ie=ne[1],le=(0,c.useState)(""),oe=(0,r.Z)(le,2),se=oe[0],re=oe[1],ce=(0,c.useState)(!0),de=(0,r.Z)(ce,2),ue=de[0],me=de[1],pe=(0,c.useState)([]),he=(0,r.Z)(pe,2),ve=he[0],ge=he[1],fe=(0,c.useState)(!1),xe=(0,r.Z)(fe,2),Ze=xe[0],je=xe[1],ye=(0,c.useState)(!0),be=(0,r.Z)(ye,2),_e=be[0],Ne=be[1],Se=(0,c.useState)(P),we=(0,r.Z)(Se,2),Ce=we[0],Ee=we[1],De=(0,c.useState)(!1),Ie=(0,r.Z)(De,2),Le=Ie[0],Fe=Ie[1],Re=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A("api/residential/scheduling/type/list/active");case 3:t=e.sent,J(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ke=function(e){Ee({id:0,residential_id:e.id,contact_name:e.contact_person,contact_phone:e.phone,contact_email:e.email,schedule_type:"",description:"",client_type:"",meeting_type:""}),ee(e.name),je(!1),console.log(e)},ze=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={nit:se},e.prev=1,je(!0),me(!0),e.next=6,A("api/residential/list",t);case 6:1===(n=e.sent).length&&R&&(null===R||void 0===R?void 0:R.length)>5&&_e?ke(n[0]):(a=n.slice(0,15),ge(a)),Ne(!1),me(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("Error");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var n,a,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ce.id,n=(0,i.Z)(Ce,Y),!k.id){e.next=8;break}return o=y()(Ce.demo_date).format("YYYY-MM-DDTHH:mm:ssZ"),a={id:k.id,residential_id:n.residential_id,demo_date:o,contact_name:n.contact_name,contact_phone:n.contact_phone,contact_email:n.contact_email,schedule_type:n.schedule_type,description:n.description,client_type:n.client_type,meeting_type:"Llamada"===Ce.meeting_type?"No aplica":Ce.meeting_type},e.next=6,B(a,"residential/demoScheduling/edit","visitasdemosreuniones");case 6:e.next=12;break;case 8:return o=y()(Ce.demo_date).format("YYYY-MM-DDTHH:mm:ssZ"),a=(0,s.Z)((0,s.Z)({},n),{},{id:0,demo_date:o,meeting_type:"Llamada"===Ce.meeting_type?"No aplica":Ce.meeting_type}),e.next=12,M(a,"residential/demoScheduling/create",!1,"visitasdemosreuniones");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(e){var t=e.target,n=t.name,i=t.value;if("contact_phone"===n){var l=i.replace(/\D/g,"");Ee((function(e){return(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},n,l))}))}else Ee("schedule_type"===n?function(e){var t;return(0,s.Z)((0,s.Z)({},e),{},(t={},(0,a.Z)(t,n,i),(0,a.Z)(t,"meeting_type","visita"===i?"presencial":e.meeting_type),t))}:function(e){return(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},n,i))});V(n),function(e,t){var n=(0,s.Z)({},H);"demo_date"===e&&(C().isEmpty(t)?n.demo_date="El campo fecha de demo es obligatorio":delete n.demo_date),"contact_name"===e&&(C().isEmpty(t)?n.contact_name="El campo de Encargado es obligatorio":C().isNumeric(t)?delete n.contact_name:n.price=["El campo valor debe ser num\xe9rico"]),"contact_phone"===e&&(C().isEmpty(t)?n.contact_phone="El campo de Tel\xe9fono es obligatorio":C().isNumeric(t)?delete n.contact_phone:n.contact_phone="El campo tel\xe9fono de contacto debe ser num\xe9rico"),"contact_email"===e&&(C().isEmpty(t)?n.contact_email="El campo de Correo es obligatorio":delete n.contact_email),"schedule_type"===e&&(C().isEmpty(t)?n.schedule_type="Debe seleccionar al menos un tipo de cotizaci\xf3n":delete n.schedule_type),"client_type"===e&&(C().isEmpty(t)?n.client_type="El campo lugar de la reunion es obligatorio":delete n.client_type),"description"===e&&(C().isEmpty(t)?n.description="El campo descripci\xf3n es obligatorio":delete n.description),U("demo_date",n.demo_date),U("contact_name",n.contact_name),U("contact_phone",n.contact_phone),U("contact_email",n.contact_email),U("schedule_type",n.schedule_type),U("description",n.description),U("client_type",n.client_type)}(n,i)};(0,c.useEffect)((function(){Re(),k&&Ee((0,s.Z)((0,s.Z)({},P),k))}),[k]),(0,c.useEffect)((function(){se.length>=5?ze():ge([])}),[se]);var Me=function(){return(0,z.jsxs)(d.Z,{className:"p-4",style:{position:"absolute",width:"100%",left:"0",top:"110%",textAlign:"center",zIndex:1e3},children:[(0,z.jsx)(d.Z.Text,{className:"text-danger",children:"No se encontraron clientes por ese NIT"}),(0,z.jsx)(u.Z,{onClick:function(){return Fe(!0)},children:"Agregar Nuevo"})]})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(b.cI,{items:["inicio","lista visitas, demos, reuniones","form visitas, demos, reuniones"],baseURL:["inicio","nexos/visitasdemosreuniones",""]}),(0,z.jsx)(b.r3,{title:"PASO 1",subtitle:"VISITAS, DEMOS, REUNIONES",align:"center"}),(0,z.jsx)(q,{show:Le,handleClose:function(){return Fe(!1)},searchNit:se}),(0,z.jsxs)("div",{className:"mt-5 w-100",children:[(0,z.jsx)(m.Z,{className:"justify-content-center",children:(0,z.jsx)(p.Z,{sm:12,md:12,lg:12,xl:12,children:(0,z.jsx)(d.Z,{className:"w-75 mx-auto",children:(0,z.jsxs)(d.Z.Body,{className:"relative",children:[(0,z.jsx)(h.Z.Control,{id:"outlined-basic",type:"text",placeholder:"Buscar por Nit",className:"form-control p-3",size:"sm",value:se,onChange:function(e){re(e.target.value)}}),0===ve.length&&se.length>=5&&ue&&(0,z.jsx)(b.aN,{}),0===ve.length&&se.length>=5&&!ue&&Ze&&(0,z.jsx)(Me,{}),ve.length>0&&se.length>=5&&Ze&&(0,z.jsx)(S.$R,{listMenu:ve,selectedSearchResult:ke,showListMenu:Ze,setShowListMenu:je})]})})})}),(0,z.jsxs)(d.Z,{className:"p-4",children:[(0,z.jsxs)(m.Z,{className:"",children:[(0,z.jsxs)(p.Z,{sm:12,md:12,lg:6,xl:6,children:[(0,z.jsx)(h.Z.Label,{className:"form-label ",children:"Tipo de agendamiento"}),(0,z.jsx)(b.fm,{message:H.schedule_type,inputFocus:ae,children:(0,z.jsx)(v.Z,{className:"control-group form-group m-0 d-flex w-100",children:(0,z.jsx)("div",{className:"d-flex align-items-start flex-column w-100",children:(0,z.jsxs)(h.Z.Select,{name:"schedule_type",style:{padding:8,border:"0.5px solid gray"},"aria-label":"Default select example",className:ae?"border-primary":"",onChange:Ae,value:null!==(e=null===Ce||void 0===Ce?void 0:Ce.schedule_type)&&void 0!==e?e:"",onFocus:function(){return ie(!0)},onBlur:function(){return ie(!1)},children:[Ce.schedule_type?null:(0,z.jsx)("option",{value:"",children:"Seleccione el tipo de agendamiento"}),K&&K.map((function(e){return(0,z.jsx)("option",{value:e.name,children:e.name},e.id)}))]})})})})]}),(0,z.jsx)(p.Z,{sm:12,md:12,lg:6,xl:6,children:(0,z.jsxs)(v.Z,{className:"form-group m-0",children:[(0,z.jsx)(h.Z.Label,{className:"form-label",children:"Nombre del cliente"}),(0,z.jsx)(h.Z.Control,{type:"text",name:"name",disabled:!0,className:"form-control",value:null!==(t=null===Ce||void 0===Ce?void 0:Ce.residential_name)&&void 0!==t?t:X,onChange:Ae})]})}),(0,z.jsx)(p.Z,{sm:12,md:12,lg:6,xl:6,children:(0,z.jsxs)(v.Z,{className:"form-group m-0",children:[(0,z.jsx)(h.Z.Label,{className:"form-label",children:"Encargado"}),(0,z.jsx)(b.fm,{message:H.contact_name,inputFocus:ae,children:(0,z.jsx)(h.Z.Control,{type:"text",className:"form-control",placeholder:"",name:"contact_name",value:null!==(n=null===Ce||void 0===Ce?void 0:Ce.contact_name)&&void 0!==n?n:"",required:!0,onChange:Ae})})]})}),(0,z.jsx)(p.Z,{sm:12,md:12,lg:6,xl:6,children:(0,z.jsxs)(v.Z,{className:"form-group m-0",children:[(0,z.jsx)(h.Z.Label,{className:"form-label",children:"lugar de la reunion"}),(0,z.jsx)(b.fm,{message:H.client_type,inputFocus:ae,children:(0,z.jsx)(h.Z.Control,{type:"text",name:"client_type",value:null!==(j=null===Ce||void 0===Ce?void 0:Ce.client_type)&&void 0!==j?j:"",className:"form-control",onChange:Ae})})]})}),"Llamada"!=Ce.schedule_type?(0,z.jsx)(p.Z,{sm:12,md:12,lg:6,xl:6,children:(0,z.jsxs)(v.Z,{className:"form-group m-0",children:[(0,z.jsx)(h.Z.Label,{className:"form-label",children:"Tipo de reunion"}),(0,z.jsx)(b.fm,{message:H.meeting_type,inputFocus:ae,children:(0,z.jsx)("div",{className:"d-flex align-items-start flex-column w-100",children:(0,z.jsxs)(h.Z.Select,{name:"meeting_type",style:{padding:8,border:"0.5px solid gray"},"aria-label":"Default select example",className:ae?"border-primary":"",onChange:Ae,value:null!==(w=null===Ce||void 0===Ce?void 0:Ce.meeting_type)&&void 0!==w?w:"",onFocus:function(){return ie(!0)},onBlur:function(){return ie(!1)},children:[(0,z.jsx)("option",{value:"",children:"Seleccione el tipo de reunion"}),(0,z.jsx)("option",{value:"presencial",children:" Presencial "}),(0,z.jsx)("option",{value:"virtual",children:" Virtual "})]})})})]})}):null,(0,z.jsx)(p.Z,{sm:12,md:12,lg:6,xl:6,children:(0,z.jsxs)(v.Z,{className:"form-group m-0",children:[(0,z.jsx)(h.Z.Label,{className:"form-label",children:"Correo"}),(0,z.jsx)(b.fm,{message:H.contact_email,inputFocus:ae,children:(0,z.jsx)(h.Z.Control,{type:"email",className:"form-control",placeholder:"",name:"contact_email",value:null!==(D=null===Ce||void 0===Ce?void 0:Ce.contact_email)&&void 0!==D?D:"",required:!0,onChange:Ae})})]})}),(0,z.jsx)(p.Z,{sm:12,md:12,lg:6,xl:6,children:(0,z.jsxs)(v.Z,{className:"form-group m-0",children:[(0,z.jsx)(h.Z.Label,{className:"form-label",children:"Telefono"}),(0,z.jsx)(b.fm,{message:H.contact_phone,inputFocus:ae,children:(0,z.jsx)(h.Z.Control,{type:"text",className:"form-control",placeholder:"",value:null!==(I=null===Ce||void 0===Ce?void 0:Ce.contact_phone)&&void 0!==I?I:"",name:"contact_phone",required:!0,onChange:Ae})})]})}),(0,z.jsxs)(p.Z,{sm:12,md:12,lg:6,xl:6,children:[(0,z.jsx)(h.Z.Label,{className:"form-label",children:"Fecha de demostraci\xf3n"}),(0,z.jsx)(b.fm,{message:H.demo_date,inputFocus:ae,children:(0,z.jsx)(f._,{style:{height:10,width:"100%"},dateAdapter:x.y,children:(0,z.jsx)(g.$,{className:"w-100 text-primary",label:" ",inputFormat:"DD/MM/YYYY",value:null!==(L=null===Ce||void 0===Ce?void 0:Ce.demo_date)&&void 0!==L?L:y()().format("L"),onChange:function(e){Ee((function(t){return(0,s.Z)((0,s.Z)({},t),{},{demo_date:e||y()()})}))},renderInput:function(e){return(0,z.jsx)(Z.Z,(0,s.Z)({},e))}})})})]})]}),(0,z.jsx)(h.Z.Label,{className:"w-100 form-label text-center text-uppercase",children:"Objetivo de la reunion, demo, vista, llamada"}),(0,z.jsx)(b.fm,{message:H.description,inputFocus:ae,children:(0,z.jsx)(d.Z,{className:"w-100 text-center",children:(0,z.jsx)(v.Z,{children:(0,z.jsx)(h.Z.Control,{as:"textarea",rows:3,name:"description",value:null!==(F=null===Ce||void 0===Ce?void 0:Ce.description)&&void 0!==F?F:"",onChange:Ae})})})})]}),(0,z.jsxs)(m.Z,{className:"p-3 d-flex justify-content-end mb-3",children:[(0,z.jsx)(E.rU,{to:"".concat("/GestorNew","/nexos/visitasdemosreuniones"),children:(0,z.jsx)(u.Z,{children:"Volver"})}),(0,z.jsx)(u.Z,{className:"btn btn-primary",type:"submit",onClick:Te,children:"Continuar"})]})]})]})}},12009:function(e,t,n){n.d(t,{UP:function(){return C},$R:function(){return _}});var a=n(72791),i=n(80184),l=n(79627),o=n(1413),s=n(45987),r=n(81694),c=n.n(r),d=(n(42391),n(80239)),u=n(41337),m=n(10162),p=n(29439),h=n(39007),v=n(24787),g=n(78633),f=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],x=a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.active,l=e.disabled,r=e.eventKey,d=e.className,u=e.variant,x=e.action,Z=e.as,j=(0,s.Z)(e,f);n=(0,m.vE)(n,"list-group-item");var y=(0,v.v)((0,o.Z)({key:(0,g.h)(r,j.href),active:a},j)),b=(0,p.Z)(y,2),_=b[0],N=b[1],S=(0,h.Z)((function(e){if(l)return e.preventDefault(),void e.stopPropagation();_.onClick(e)}));l&&void 0===j.tabIndex&&(j.tabIndex=-1,j["aria-disabled"]=!0);var w=Z||(x?j.href?"a":"button":"div");return(0,i.jsx)(w,(0,o.Z)((0,o.Z)((0,o.Z)({ref:t},j),_),{},{onClick:S,className:c()(d,n,N.isActive&&"active",l&&"disabled",u&&"".concat(n,"-").concat(u),x&&"".concat(n,"-action"))}))}));x.displayName="ListGroupItem";var Z=x,j=["className","bsPrefix","variant","horizontal","numbered","as"],y=a.forwardRef((function(e,t){var n,a=(0,d.Ch)(e,{activeKey:"onSelect"}),l=a.className,r=a.bsPrefix,p=a.variant,h=a.horizontal,v=a.numbered,g=a.as,f=void 0===g?"div":g,x=(0,s.Z)(a,j),Z=(0,m.vE)(r,"list-group");return h&&(n=!0===h?"horizontal":"horizontal-".concat(h)),(0,i.jsx)(u.Z,(0,o.Z)((0,o.Z)({ref:t},x),{},{as:f,className:c()(l,Z,p&&"".concat(Z,"-").concat(p),n&&"".concat(Z,"-").concat(n),v&&"".concat(Z,"-numbered"))}))}));y.displayName="ListGroup";var b=Object.assign(y,{Item:Z}),_=function(e){var t=e.listMenu,n=e.selectedSearchResult,o=e.showListMenu,s=e.setShowListMenu,r=(0,a.useRef)(),c=function(e){o&&r.current&&!r.current.contains(e.target)&&s(!1)};return(0,a.useEffect)((function(){return document.addEventListener("click",c),function(){document.removeEventListener("click",c)}}),[o]),(0,i.jsx)(l.Z,{style:{position:"absolute",left:"0",width:"100%",overflow:"hidden",top:"110%",zIndex:1e3,border:"1px solid #9c9ca1"},ref:r,children:(0,i.jsx)(l.Z.Body,{children:(0,i.jsx)(b,{className:"overflow-auto",style:{maxHeight:"200px"},children:null===t||void 0===t?void 0:t.map((function(e){return(0,i.jsx)(l.Z.Text,{className:"px-3 py-2 cursor-pointer hover_selected_bg",style:{width:"100%",display:"flex",alignItems:"center",borderBottom:"1px solid #9c9ca1"},onClick:function(){return n(e)},children:e.name},e.id)}))})})})},N=n(20160),S=function(e){var t=e.item,n=e.handleSelectedServices;return(0,i.jsx)("div",{className:"w-100 mb-2 p-2 bg-white rounded shadow-sm",style:{border:"3px solid ".concat((null===t||void 0===t?void 0:t.quotes)>0?"#fd7e14":"#cdd4e2")},children:(0,i.jsxs)(N.Z.Label,{className:"custom-control custom-checkbox",children:[(0,i.jsx)(N.Z.Control,{type:"checkbox",className:"custom-control-input",name:"profiles",value:null===t||void 0===t?void 0:t.id,checked:(null===t||void 0===t?void 0:t.quotes)>0,onChange:function(){return n(t)}}),(0,i.jsx)("span",{className:"custom-control-label font-weight-bold",style:{color:"#4A4A69"},children:null===t||void 0===t?void 0:t.name})]})})},w=function(e){var t=e.item,n=e.handleSelectedServices;return(0,i.jsxs)("div",{className:"w-100 d-flex justify-content-between align-items-center gap-2 mb-2 bg-white rounded p-2 shadow-sm",style:{border:"3px solid ".concat((null===t||void 0===t?void 0:t.quotes)>0?"#fd7e14":"#cdd4e2")},children:[(0,i.jsx)(N.Z.Label,{className:"font-weight-bold",style:{color:"#4A4A69"},children:t.name}),(0,i.jsx)("input",{type:"number",className:"text-center py-2 rounded",style:{width:"80px",border:"2px solid ".concat((null===t||void 0===t?void 0:t.quotes)>0?"#fd7e14":"#cdd4e2")},name:"sort",value:(null===t||void 0===t?void 0:t.quotes)||0,onChange:function(e){return n(t,e)}})]})},C=function(e){var t=e.inputData,n=e.handleSelectedServices;return 1===t.contable?(0,i.jsx)(w,{item:t,handleSelectedServices:n}):(0,i.jsx)(S,{item:t,handleSelectedServices:n})}},20409:function(e,t,n){n.d(t,{Z:function(){return f}});var a=n(87462),i=n(63366),l=n(72791),o=n(28182),s=n(94419),r=n(9367),c=n(67254),d=n(49853),u=n(21217);function m(e){return(0,u.Z)("MuiIcon",e)}(0,n(75878).Z)("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=n(80184),h=["baseClassName","className","color","component","fontSize"],v=(0,r.ZP)("span",{name:"MuiIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,d.Z)(n.color))],t["fontSize".concat((0,d.Z)(n.fontSize))]]}})((function(e){var t=e.theme,n=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:t.typography.pxToRem(20),medium:t.typography.pxToRem(24),large:t.typography.pxToRem(36)}[n.fontSize],color:{primary:(t.vars||t).palette.primary.main,secondary:(t.vars||t).palette.secondary.main,info:(t.vars||t).palette.info.main,success:(t.vars||t).palette.success.main,warning:(t.vars||t).palette.warning.main,action:(t.vars||t).palette.action.active,error:(t.vars||t).palette.error.main,disabled:(t.vars||t).palette.action.disabled,inherit:void 0}[n.color]}})),g=l.forwardRef((function(e,t){var n=(0,c.Z)({props:e,name:"MuiIcon"}),l=n.baseClassName,r=void 0===l?"material-icons":l,u=n.className,g=n.color,f=void 0===g?"inherit":g,x=n.component,Z=void 0===x?"span":x,j=n.fontSize,y=void 0===j?"medium":j,b=(0,i.Z)(n,h),_=(0,a.Z)({},n,{baseClassName:r,color:f,component:Z,fontSize:y}),N=function(e){var t=e.color,n=e.fontSize,a=e.classes,i={root:["root","inherit"!==t&&"color".concat((0,d.Z)(t)),"fontSize".concat((0,d.Z)(n))]};return(0,s.Z)(i,m,a)}(_);return(0,p.jsx)(v,(0,a.Z)({as:Z,className:(0,o.Z)(r,"notranslate",N.root,u),ownerState:_,"aria-hidden":!0,ref:t},b))}));g.muiName="Icon";var f=g}}]);
//# sourceMappingURL=9966.02d3d1f3.chunk.js.map