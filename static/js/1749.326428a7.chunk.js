"use strict";(self.webpackChunknowa=self.webpackChunknowa||[]).push([[1749],{74864:function(e,t,r){r.r(t);var a=r(74165),n=r(15861),s=r(29439),l=r(72791),i=r(16871),o=r(79627),c=r(20160),u=r(89743),d=r(2677),p=r(43360),v=r(82570),f=r.n(v),m=r(24490),x=r(42713),h=r(80184);t.default=function(){var e,t,r,v,b,j,Z,g=(0,l.useState)(""),k=(0,s.Z)(g,2),N=k[0],E=k[1],C=(0,l.useState)(1),A=(0,s.Z)(C,2),S=A[0],w=A[1],y=(0,l.useState)(""),I=(0,s.Z)(y,2),L=(I[0],I[1]),_=(0,l.useState)(""),U=(0,s.Z)(_,2),D=(U[0],U[1],(0,l.useState)(1)),O=(0,s.Z)(D,2),T=(O[0],O[1],(0,i.UO)(),(0,i.TH)()),V=(0,l.useState)(!1),F=(0,s.Z)(V,2),R=(F[0],F[1]),q=(0,l.useState)(!1),z=(0,s.Z)(q,2),B=z[0],G=z[1],H=(0,m.VY)(),Y=(H.handleSuccessAlert,H.handleErrorAlert),J=H.handleEditConfirmation,K=(0,m.ib)(),M=K.postData,P=K.putData,Q=K.error,W=function(e){return B&&!e.trim()?"El campo nombre no puede estar vac\xedo.":f().isAlpha(e.replace(/ /g,""),"es-ES")?"":"No se permiten n\xfameros o caracteres especiales en el nombre."},X=function(e){w(parseInt(e.target.value))},$=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(){var t,r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("\xbfEst\xe1s seguro de que deseas editar el perfil?");case 2:if(!e.sent.isConfirmed){e.next=14;break}return n={name:N,status_id:S,id:null!==T&&void 0!==T&&null!==(t=T.state)&&void 0!==t&&t.id?parseInt(null===T||void 0===T||null===(r=T.state)||void 0===r?void 0:r.id,10):0},e.prev=5,e.next=8,P(n,"users/profiles/edit","listarperfiles");case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),console.error("Error al editar el perfil:",e.t0),Y("Error, No se pudo editar el perfil.");case 14:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(t){var r,n,s,l,i,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s=W(N),l=null!==T&&void 0!==T&&null!==(r=T.state)&&void 0!==r&&r.id?"":"Activo"!=="Activo"?"El estado debe ser 'Activo' para crear un perfil.":"",console.log("Status Error"),!s||!l){e.next=7;break}return L("".concat(s,"\n").concat(l)),e.abrupt("return");case 7:if(!s){e.next=10;break}return L(s),e.abrupt("return");case 10:if(!l){e.next=13;break}return L(l),e.abrupt("return");case 13:if(null===T||void 0===T||null===(n=T.state)||void 0===n||!n.id){e.next=17;break}$(),e.next=30;break;case 17:if(1===S){e.next=21;break}Y("Error, Solo se puede agregar un perfil con estado 'Activo'."),e.next=30;break;case 21:return c={name:N,status_id:S,id:null!==T&&void 0!==T&&null!==(i=T.state)&&void 0!==i&&i.id?parseInt(null===T||void 0===T||null===(o=T.state)||void 0===o?void 0:o.id,10):0},e.prev=22,e.next=25,M(c,"users/profiles/create");case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(22),console.error("Error al crear el perfil:",e.t0);case 30:case"end":return e.stop()}}),e,null,[[22,27]])})));return function(t){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){!function(){var e;if(null!==T&&void 0!==T&&null!==(e=T.state)&&void 0!==e&&e.id){var t=T.state;t&&(E(t.name),w(t.status_id))}}()}),[null===T||void 0===T||null===(e=T.state)||void 0===e?void 0:e.id]);return Q?(0,h.jsx)(x.bI,{baseURL:"#",title:"Error",subtitle:"".concat(null===Q||void 0===Q?void 0:Q.message)}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(x.cI,{items:["inicio","perfiles",null!==T&&void 0!==T&&null!==(t=T.state)&&void 0!==t&&t.id?"Editar perfil":"Agregar perfil"],baseURL:["inicio","listprofiles",null!==T&&void 0!==T&&null!==(r=T.state)&&void 0!==r&&r.id?"editprofile/"+(null===T||void 0===T||null===(v=T.state)||void 0===v?void 0:v.id):"createprofile"]}),(0,h.jsx)(x.r3,{title:null!==T&&void 0!==T&&null!==(b=T.state)&&void 0!==b&&b.id?"Editar perfil":"Agregar perfil",align:"center"}),(0,h.jsx)(o.Z,{children:(0,h.jsx)(o.Z.Body,{children:(0,h.jsxs)(c.Z,{onSubmit:ee,children:[(0,h.jsxs)(u.Z,{className:"row-sm ",children:[(0,h.jsxs)(d.Z,{sm:12,md:12,lg:6,xl:6,className:"text-center",children:[(0,h.jsx)("h5",{children:"Nombre de perfil"}),(0,h.jsx)("br",{}),(0,h.jsx)(c.Z.Group,{children:(0,h.jsx)(c.Z.Control,{className:"text-capitalize",type:"text",onFocus:function(){R(!0)},name:"name",placeholder:"Nombre",value:N,onChange:function(e){var t=e.target.value,r=t.replace(/\d/g,"");E(r.toLowerCase().replace(/\b\w/g,(function(e){return e.toUpperCase()}))),B||""===t.trim()||G(!0)}})})]}),(0,h.jsxs)(d.Z,{sm:12,md:12,lg:6,xl:6,className:"text-center",children:[(0,h.jsx)("h5",{children:"Estado"}),(0,h.jsx)("br",{}),(0,h.jsxs)("div",{className:"d-flex justify-content-evenly",children:[(0,h.jsxs)(c.Z.Label,{className:"custom-control custom-radio",children:[(0,h.jsx)(c.Z.Control,{type:"radio",className:"custom-control-input",name:"status_id",value:"1",checked:1===S,onChange:X}),(0,h.jsx)("span",{className:"custom-control-label",children:"ACTIVO"})]}),(0,h.jsxs)(c.Z.Label,{className:"custom-control custom-radio",children:[(0,h.jsx)(c.Z.Control,{type:"radio",className:"custom-control-input",name:"status_id",value:"0",checked:0===S,onChange:X}),(0,h.jsx)("span",{className:"custom-control-label",children:"INACTIVO"})]})]})]})]}),(0,h.jsx)("div",{className:"text-center text-md-end text-lg-end mt-4",children:(0,h.jsx)(p.Z,{variant:"",type:"submit",className:"btn btn-primary",disabled:(null===T||void 0===T||null===(j=T.state)||void 0===j||!j.id)&&(""===N.trim()||1!==S),children:null!==T&&void 0!==T&&null!==(Z=T.state)&&void 0!==Z&&Z.id?"Editar perfil":"Agregar perfil"})})]})})})]})}}}]);
//# sourceMappingURL=1749.326428a7.chunk.js.map