{"version":3,"file":"static/js/6671.2cfae756.chunk.js","mappings":"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","sources":["components/Nexos/pages/Discounts/CreateOrEditDiscounts.tsx"],"sourcesContent":["import { Card, Col, Row, Button, Form, FormGroup } from 'react-bootstrap';\nimport { useEffect, useState } from 'react';\nimport { useLocation } from \"react-router-dom\";\nimport { useFetch } from '../../hooks/useFetch';\nimport { useAlert, useErrors } from '../../hooks';\nimport { TitleComponent, BreadCrumb, InputErrorMessage } from '../../Global';\nimport validator from \"validator\";\n\nconst InitValues = {\n    id: 0,\n    name: \"\",\n    is_percentage: 1,\n    amount: \"\",\n    description: \"\",\n    status_id: 1\n}\n\nconst CreateOrEditDiscounts = () => {\n\n    const [form, setForm] = useState<any>(InitValues);\n    const { postData, putData } = useFetch();\n    const location: any = useLocation();\n    const { state: editItemData } = location;\n    const { handleEditConfirmation, handleSuccessAlert, handleErrorAlert } = useAlert();\n    const [inputFocus, setInputFocus] = useState(false);\n    const { errors, setError, clearError } = useErrors();\n    const handleChange = (e: any) => {\n        const { name, value, type } = e.target;\n        let newValue = type === \"radio\" ? parseInt(value) : value;\n\n        if (name === 'name') {\n            newValue = value\n                .toLowerCase()\n                .split(' ')\n                .map((word: string) => word.charAt(0).toUpperCase() + word.slice(1))\n                .join(' ');\n        }\n        setForm((prev: any) => ({\n            ...prev,\n            [name]: newValue\n        }));\n    };\n\n    const handleInputFocus = () => {\n        setInputFocus(true);\n    };\n\n    const handlesubmit = (e: any) => {\n        e.preventDefault();\n        selectFunction();\n    };\n\n    const selectFunction = () => {\n        if (location?.state?.id != null) {\n            editForm();\n        } else {\n            createForm();\n        }\n    };\n\n    const createForm = async () => {\n        try {\n            await postData(form, 'discount/create', false, \"listardescuentos\");\n        } catch (error) {\n            console.error(\"Error en createdescuento:\", error);\n            handleErrorAlert(\"Error al crear el descuento.\");\n        }\n    };\n    const editForm = async () => {\n        try {\n            // Mostrar la confirmación antes de editar el form\n            const confirmationResult = await handleEditConfirmation(\"¿Estás seguro que deseas editar este descuento?\");\n            if (confirmationResult.isConfirmed) {\n                const { id, ...rest } = form;\n                const payload = {\n                    ...rest,\n                    id: form.id,\n                };\n                const res = await putData(payload, `discount/edit/${form.id}`);\n                if (!res.success) {\n                    handleErrorAlert(\"Error al editar el descuento.\");\n                } else {\n                    handleSuccessAlert(\"El descuento se editó exitosamente.\", \"listardescuentos\");\n                }\n            }\n        } catch (error) {\n            console.error(\"Error en editForm:\", error);\n            handleErrorAlert(\"Error al editar el descuento.\");\n        }\n    };\n\n    useEffect(() => {\n        if (!!editItemData) {\n            setForm(editItemData);\n        }\n    }, [editItemData]);\n\n    return (\n        <>\n            {/* <!-- breadcrumb --> */}\n            <BreadCrumb\n                items={['INICIO', 'lista descuentos', location?.state?.id ? \"Editar Descuento\" : \"Agregar Descuento\"]}\n                baseURL={['inicio', 'nexos/listardescuentos', location?.state?.id ? \"editardescuento/\" + location?.state?.id : \"creardescuento\"]} />\n            {/* title component */}\n            <TitleComponent title={location?.state?.id ? \"Editar Descuento\" : \"Agregar Descuento\"} />\n            {/* Card */}\n            <Form className=\"form-horizontal\" onSubmit={handlesubmit}>\n                <Card className=\"w-100\">\n                    <Card.Body className=\"w-100\">\n                        <Row>\n                            <Col sm={12} md={12} lg={6} xl={6}>\n                                <Row className=\"justify-content-center\">\n                                    <Col sm={12} md={12} lg={12} xl={12}>\n                                        <FormGroup className=\"form-group w-100 m-0\">\n                                            <Form.Label className='mb-3'>NOMBRE DEL DESCUENTO</Form.Label>\n                                            <Form.Control\n                                                type=\"text\"\n                                                className={`form-control`}\n                                                placeholder=\"\"\n                                                name=\"name\"\n                                                required\n                                                value={form?.name ?? \"\"}\n                                                onChange={handleChange}\n                                                onFocus={handleInputFocus}\n                                            />\n                                        </FormGroup>\n                                    </Col>\n                                </Row>\n                                <Row className='d-flex mt-4'>\n                                    <Col sm={12} md={12} lg={12} xl={12} className=''>\n                                        <FormGroup>\n                                            <Form.Label>DESCRIPCION</Form.Label>\n                                            <InputErrorMessage message={errors.description} inputFocus={inputFocus}>\n                                                <Form.Control\n                                                    style={{ height: \"5.5cm\", width: '100% !important' }}\n                                                    as=\"textarea\"\n                                                    name=\"description\"\n                                                    value={form?.description ?? \"\"}\n                                                    onChange={handleChange}\n                                                    placeholder=\"Detalles del servicio...\"\n                                                    onFocus={handleInputFocus}\n                                                    required\n                                                />\n                                            </InputErrorMessage>\n                                        </FormGroup>\n                                    </Col>\n                                </Row>\n                            </Col>\n                            <Col sm={12} md={12} lg={6} xl={6}>\n                                <Row className='mb-3 mt-1'>\n                                    <Col xs={12} sm={12} md={12} lg={12} xl={12} >\n                                        <FormGroup className=\"form-group text-center\">\n                                            <Form.Label className=\"form-label mb-2\">VALOR EN PORCENTAJE</Form.Label>\n                                            <div className=\"custom-controls-stacked d-flex justify-content-center gap-5\">\n                                                <Form.Label className=\"custom-control custom-radio\">\n                                                    <Form.Control\n                                                        type=\"radio\"\n                                                        className=\"custom-control-input\"\n                                                        name=\"is_percentage\"\n                                                        value={1}\n                                                        checked={form?.is_percentage === 1}\n                                                        onChange={handleChange}\n                                                    />\n                                                    <span className=\"custom-control-label\">Si</span>\n                                                </Form.Label>\n                                                <Form.Label className=\"custom-control custom-radio\">\n                                                    <Form.Control\n                                                        type=\"radio\"\n                                                        className=\"custom-control-input\"\n                                                        name=\"is_percentage\"\n                                                        value={0}\n                                                        checked={form?.is_percentage === 0}\n                                                        onChange={handleChange}\n                                                    />\n                                                    <span className=\"custom-control-label\">No</span>\n                                                </Form.Label>\n                                            </div>\n                                        </FormGroup>\n                                    </Col>\n                                </Row>\n                                <Row className=\"justify-content-center  \">\n                                    <Col sm={12} md={12} lg={12} xl={12}>\n                                        <FormGroup className=\"form-group w-100 m-0\">\n                                            <Form.Label className='mb-2'>{form.is_percentage === 1 ? 'PORCENTAJE' : 'VALOR'} DEL DESCUENTO</Form.Label>\n                                            <Form.Control\n                                                type=\"number\"\n                                                className={`form-control`}\n                                                placeholder=\"\"\n                                                name=\"amount\"\n                                                required\n                                                value={form?.amount ?? \"\"}\n                                                onChange={handleChange}\n                                                onFocus={handleInputFocus}\n                                            />\n                                        </FormGroup>\n                                    </Col>\n                                </Row>\n                                <Row className='mt-3'>\n                                    <Col xs={12} sm={12} md={12} lg={12} xl={12} >\n                                        <FormGroup className=\"form-group text-center\">\n                                            <Form.Label className=\"form-label\">ESTADO</Form.Label>\n                                            <div className=\"custom-controls-stacked d-flex justify-content-center gap-5\">\n                                                <Form.Label className=\"custom-control custom-radio\">\n                                                    <Form.Control\n                                                        type=\"radio\"\n                                                        className=\"custom-control-input\"\n                                                        name=\"status_id\"\n                                                        value={1}\n                                                        checked={form?.status_id === 1}\n                                                        onChange={handleChange}\n                                                    />\n                                                    <span className=\"custom-control-label\">Activo</span>\n                                                </Form.Label>\n                                                <Form.Label className=\"custom-control custom-radio\">\n                                                    <Form.Control\n                                                        type=\"radio\"\n                                                        className=\"custom-control-input\"\n                                                        name=\"status_id\"\n                                                        value={0}\n                                                        checked={form?.status_id === 0}\n                                                        onChange={handleChange}\n                                                    />\n                                                    <span className=\"custom-control-label\">Inactivo</span>\n                                                </Form.Label>\n                                            </div>\n                                        </FormGroup>\n                                    </Col>\n                                </Row>\n                                <Row className='mb-4 mt-4'>\n                                    <Col xs={12} sm={12} md={12} lg={12} xl={12}>\n                                        <Button\n                                            variant=\"\"\n                                            className=\"btn btn-primary\"\n                                            style={{ width: \"100%\" }}\n                                            type=\"submit\"\n                                        >\n                                            {editItemData ? \"Editar cambios\" : \"Guardar cambios\"}\n                                        </Button>\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                    </Card.Body>\n                </Card>\n            </Form>\n        </>\n    );\n\n}\n\nexport default CreateOrEditDiscounts;\n"],"names":["InitValues","id","name","is_percentage","amount","description","status_id","useState","form","setForm","useFetch","postData","putData","location","useLocation","editItemData","state","useAlert","handleEditConfirmation","handleSuccessAlert","handleErrorAlert","inputFocus","setInputFocus","useErrors","errors","handleChange","setError","clearError","e","target","value","newValue","type","parseInt","toLowerCase","split","map","word","charAt","toUpperCase","slice","join","prev","handleInputFocus","selectFunction","editForm","createForm","console","error","isConfirmed","rest","payload","success","useEffect","items","baseURL","title","className","onSubmit","preventDefault","sm","md","lg","xl","placeholder","required","onChange","onFocus","message","style","height","width","as","xs","checked","variant"],"sourceRoot":""}