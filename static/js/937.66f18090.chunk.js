(self.webpackChunknowa=self.webpackChunknowa||[]).push([[937],{49391:function(e,r,o){"use strict";o.r(r),o.d(r,{default:function(){return M}});var n=o(1413),s=o(93433),t=o(45987),a=o(74165),l=o(15861),i=o(29439),u=o(72791),c=o(63366),d=o(87462),m=o(28182),f=o(94419),p=o(9367),v=o(67254),h=o(21217);function x(e){return(0,h.Z)("MuiFormGroup",e)}(0,o(75878).Z)("MuiFormGroup",["root","row","error"]);var Z=o(90529),g=o(50040),j=o(80184),b=["className","row"],N=(0,p.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,r){var o=e.ownerState;return[r.root,o.row&&r.row]}})((function(e){var r=e.ownerState;return(0,d.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},r.row&&{flexDirection:"row"})})),w=u.forwardRef((function(e,r){var o=(0,v.Z)({props:e,name:"MuiFormGroup"}),n=o.className,s=o.row,t=void 0!==s&&s,a=(0,c.Z)(o,b),l=(0,Z.Z)(),i=(0,g.Z)({props:o,muiFormControl:l,states:["error"]}),u=(0,d.Z)({},o,{row:t,error:i.error}),p=function(e){var r=e.classes,o={root:["root",e.row&&"row",e.error&&"error"]};return(0,f.Z)(o,x,r)}(u);return(0,j.jsx)(N,(0,d.Z)({className:(0,m.Z)(p.root,n),ownerState:u,ref:r},a))})),C=o(79627),y=o(20160),k=o(89743),F=o(2677),_=o(43360),S=o(16871),E=o(24490),I=o(42713),P=o(91720),A=o(80022),L=["password"],R={id:0,name:"",email:"",password:"",phone:"",profiles:[],file:"",status_id:1},M=function(){var e,r,o,c,d,m=(0,S.TH)(),f=(0,u.useState)(R),p=(0,i.Z)(f,2),v=p[0],h=p[1],x=(0,u.useState)([]),Z=(0,i.Z)(x,2),g=Z[0],b=Z[1],N=(0,E.ib)(),M=N.getAllData,U=N.postData,z=N.putData,D=(N.isLoading,N.error,(0,E.TR)(h)),T=D.handleAdd,G=D.fileInputRef,O=D.image,q=D.handleButtonClick,B=D.handleDelete,H=D.handleChangeImage,V=(0,E.y$)(h,v),W=V.handleChange,Y=V.showHide,X=V.typePassword,$=V.setUserProfiles,J=V.isPasswordTouched,K=V.setIsPasswordTouched,Q=V.resetForm,ee=V.setErrors,re=V.setHasErrors,oe=V.userProfiles,ne=V.isLocked,se=V.errors,te=V.hasErrors,ae=(0,E.VY)(),le=ae.handleSuccessAlert,ie=ae.handleErrorAlert,ue=ae.handleEditConfirmation,ce=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(v,"users/create");case 3:e.sent,le("Usuario creado exitosamente","listarusuarios"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),ee({msg:"Error, no se pudo crear el usuario"}),ie("Error, no se pudo crear el usuario");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue("\xbfSeguro que desea editar este usuario?");case 3:if(!e.sent.isConfirmed){e.next=15;break}if(r=v.password,o=(0,t.Z)(v,L),""!=r){e.next=12;break}return e.next=9,z(o,"users/edit","listarusuarios");case 9:e.sent,e.next=15;break;case 12:return e.next=14,z(v,"users/edit","listarusuarios");case 14:e.sent;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),ee({msg:"Error, no se pudo editar el usuario"}),ie("Error, no se pudo editar el usuario");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var r,o,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==(r=m.state)&&void 0!==r&&r.photo&&H(null===r||void 0===r?void 0:r.photo),o=[],(t=null==(null===r||void 0===r?void 0:r.profiles)?[]:(0,s.Z)(null===r||void 0===r?void 0:r.profiles)).length>0&&t.forEach((function(e){o.push(e.profile_id)})),console.log("userProfiles:",o),console.log("arrayProfiles:",o),console.log("newProfile:",t),$([].concat((0,s.Z)(oe),o)),h((0,n.Z)((0,n.Z)({},r),{},{profiles:o}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("api/users/profiles");case 2:r=e.sent,b(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){var e,r,o;(K(!1),fe(),null!=(null===m||void 0===m||null===(e=m.state)||void 0===e?void 0:e.id))?(me(),0===(null===m||void 0===m||null===(r=m.state)||void 0===r||null===(o=r.profiles)||void 0===o?void 0:o.length)?ee({profiles:""}):(re(!1),ee({}))):(re(!0),Q(),H(""))}),[m]);return(0,j.jsxs)("div",{children:[(0,j.jsx)(I.cI,{items:["inicio","lista usuarios",null!==m&&void 0!==m&&null!==(e=m.state)&&void 0!==e&&e.id?"EDITAR USUARIO":"Agregar USUARIO"],baseURL:["inicio","nexos/listarusuarios",null!==m&&void 0!==m&&null!==(r=m.state)&&void 0!==r&&r.id?"nexos/editarusuarios":"nexos/crearusuarios"]}),(0,j.jsx)(I.r3,{title:null!==m&&void 0!==m&&null!==(o=m.state)&&void 0!==o&&o.id?"EDITAR USUARIO":"Agregar USUARIO",align:"center"}),(0,j.jsx)(C.Z,{className:"box-shadow-0",children:(0,j.jsx)(C.Z.Body,{className:"p-4",children:(0,j.jsx)(y.Z,{className:"form-horizontal",onSubmit:function(e){e.preventDefault(),function(){var e;null!=(null===m||void 0===m||null===(e=m.state)||void 0===e?void 0:e.id)?de():ce()}()},children:(0,j.jsxs)(k.Z,{children:[(0,j.jsx)(F.Z,{lg:4,xl:4,md:6,sm:6,children:(0,j.jsxs)(w,{className:"form-group",children:[(0,j.jsxs)(w,{className:"control-group form-group",children:[(0,j.jsx)(y.Z.Label,{className:"form-label",children:"Nombre y Apellido*"}),(0,j.jsx)(I.fm,{message:se.name,inputFocus:J,children:(0,j.jsx)(y.Z.Control,{type:"text",className:"form-control text-capitalize",placeholder:"",name:"name",required:!0,value:null!==v&&void 0!==v&&v.name?null===v||void 0===v?void 0:v.name:"",onChange:W,onBlur:W,onFocus:function(){return K(!0)}})})]}),(0,j.jsxs)(w,{className:"control-group form-group",children:[(0,j.jsxs)(y.Z.Label,{className:"form-label",children:["Contrase\xf1a ",!(null!==m&&void 0!==m&&null!==(c=m.state)&&void 0!==c&&c.id)&&"*"," ",(null===m||void 0===m||null===(d=m.state)||void 0===d?void 0:d.id)&&"(opcional)"]}),(0,j.jsx)("div",{className:"input-group ",children:(0,j.jsx)(I.fm,{message:se.password,inputFocus:J,children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(y.Z.Control,{type:X.type,className:"form-control w-100",placeholder:"",name:"password",value:null!==v&&void 0!==v&&v.password?null===v||void 0===v?void 0:v.password:"",onChange:W,onFocus:function(){return K(!0)},onBlur:W,autoComplete:"off"}),(0,j.jsx)("span",{className:"input-group-text cursor-pointer h-100",onClick:Y,children:(0,j.jsx)("i",{className:"".concat(ne?"fa fa-eye":"fa fa-eye-slash")})})]})})})]}),(0,j.jsxs)(w,{className:"control-group form-group",children:[(0,j.jsx)(y.Z.Label,{className:"form-label",children:"Correo electronico*"}),(0,j.jsx)(I.fm,{message:se.email,inputFocus:J,children:(0,j.jsx)(y.Z.Control,{type:"email",className:"form-control",required:!0,placeholder:"",name:"email",value:null!==v&&void 0!==v&&v.email?null===v||void 0===v?void 0:v.email:"",onChange:W,onBlur:W,onFocus:function(){return K(!0)}})})]}),(0,j.jsxs)("div",{className:"control-group form-group mb-0",children:[(0,j.jsx)(y.Z.Label,{className:"form-label",children:"Telefono*"}),(0,j.jsx)(I.fm,{message:se.phone,inputFocus:J,children:(0,j.jsx)(y.Z.Control,{name:"phone",type:"text",className:"form-control",required:!0,value:null!==v&&void 0!==v&&v.phone?null===v||void 0===v?void 0:v.phone:"",onChange:W,onBlur:W,onFocus:function(){return K(!0)}})})]})]})}),(0,j.jsx)(F.Z,{lg:4,xl:4,md:6,sm:6,children:(0,j.jsxs)(w,{className:"form-group m-0",children:[(0,j.jsx)(y.Z.Label,{className:"form-label ",children:"Seleccione los perfiles a asignar"}),(0,j.jsx)(I.fm,{message:se.profiles,inputFocus:J,children:(0,j.jsx)("div",{className:"custom-controls-stacked",children:g.length>0?null===g||void 0===g?void 0:g.map((function(e){var r;return(0,j.jsxs)(y.Z.Label,{className:"custom-control custom-checkbox",children:[(0,j.jsx)(y.Z.Control,{type:"checkbox",className:"custom-control-input",name:"profiles",value:null===e||void 0===e?void 0:e.id,checked:null===v||void 0===v||null===(r=v.profiles)||void 0===r?void 0:r.includes(null===e||void 0===e?void 0:e.id),onChange:W}),(0,j.jsx)("span",{className:"custom-control-label",children:null===e||void 0===e?void 0:e.name})]},"".concat(null===e||void 0===e?void 0:e.id,"-").concat(null===e||void 0===e?void 0:e.name))})):null})})]})}),(0,j.jsxs)(F.Z,{lg:4,xl:4,md:12,sm:12,className:"mt-sm-4 mt-lg-0 d-flex flex-column justify-content-between",children:[(0,j.jsxs)("div",{className:"d-flex flex-column align-items-center ",children:[(0,j.jsx)(y.Z.Label,{children:"Suba aqu\xed la foto del usuario"}),(0,j.jsxs)("div",{className:"position-relative rounded-circle hover_opacity_btn",children:[(0,j.jsx)("img",{src:O||"https://cdn.icon-icons.com/icons2/1880/PNG/512/iconfinder-upload-4341320_120532.png",alt:"Imagen perfil de usuario",className:"avatar avatar-xxl rounded-circle cursor-pointer opacity-75"}),(0,j.jsx)("input",{type:"file",onChange:T,ref:G,name:"file",id:"file",className:"d-none"}),(0,j.jsx)("div",{onClick:q,style:{position:"absolute",top:"30%",left:"50%",transform:"translateX(-50%)",cursor:"pointer"},children:(0,j.jsx)(P.Z,{fontSize:"large",color:"action"})}),(0,j.jsx)("div",{onClick:B,style:{position:"absolute",top:"68%",left:"90%",cursor:"pointer"},children:(0,j.jsx)(A.Z,{fontSize:"large",color:"action"})})]})]}),(0,j.jsxs)(w,{className:"form-group text-center",children:[(0,j.jsx)(y.Z.Label,{className:"form-label",children:"Estado"}),(0,j.jsxs)("div",{className:"custom-controls-stacked d-flex justify-content-center gap-2",children:[(0,j.jsxs)(y.Z.Label,{className:"custom-control custom-radio",children:[(0,j.jsx)(y.Z.Control,{type:"radio",className:"custom-control-input",name:"status_id",checked:1==(null===v||void 0===v?void 0:v.status_id),value:1,onChange:W}),(0,j.jsx)("span",{className:"custom-control-label",children:"Activo"})]}),(0,j.jsxs)(y.Z.Label,{className:"custom-control custom-radio",children:[(0,j.jsx)(y.Z.Control,{type:"radio",className:"custom-control-input",name:"status_id",checked:0==(null===v||void 0===v?void 0:v.status_id),value:0,onChange:W}),(0,j.jsx)("span",{className:"custom-control-label",children:"Inactivo"})]})]}),(0,j.jsx)("span",{className:"tag-outline-info text-primary",children:se.status_id})]}),(0,j.jsx)(_.Z,{variant:"",className:"btn btn-primary",style:{width:"100%"},type:"submit",disabled:te,children:"Guardar"})]})]})})})})]})}},80022:function(e,r,o){"use strict";var n=o(64836);r.Z=void 0;var s=n(o(45649)),t=o(80184),a=(0,s.default)((0,t.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"HighlightOff");r.Z=a},91720:function(e,r,o){"use strict";var n=o(64836);r.Z=void 0;var s=n(o(45649)),t=o(80184),a=(0,s.default)([(0,t.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,t.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"PhotoCamera");r.Z=a},45649:function(e,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=o(31142)},31142:function(e,r,o){"use strict";o.r(r),o.d(r,{capitalize:function(){return s.Z},createChainedFunction:function(){return t},createSvgIcon:function(){return a.Z},debounce:function(){return l.Z},deprecatedPropType:function(){return i},isMuiElement:function(){return u.Z},ownerDocument:function(){return c.Z},ownerWindow:function(){return d.Z},requirePropFactory:function(){return m},setRef:function(){return f},unstable_ClassNameGenerator:function(){return b},unstable_useEnhancedEffect:function(){return p.Z},unstable_useId:function(){return v.Z},unsupportedProp:function(){return h},useControlled:function(){return x.Z},useEventCallback:function(){return Z.Z},useForkRef:function(){return g.Z},useIsFocusVisible:function(){return j.Z}});var n=o(55902),s=o(49853),t=o(78949).Z,a=o(81245),l=o(62977);var i=function(e,r){return function(){return null}},u=o(56258),c=o(5783),d=o(98195);o(87462);var m=function(e,r){return function(){return null}},f=o(62971).Z,p=o(93026),v=o(51853);var h=function(e,r,o,n,s){return null},x=o(15178),Z=o(89511),g=o(57933),j=o(42763),b={configure:function(e){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),n.Z.configure(e)}}},64836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=937.66f18090.chunk.js.map